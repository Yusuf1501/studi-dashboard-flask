{% extends "base.html" %}

{% block title2 %}
    Thesendetail: {{ thesis.title }}
{% endblock %}

{% block content %}

    <!-- Formular zum Hinzufügen eines Bewertungskriteriums -->
    <form action="/thesis/{{ thesis.id }}/add_rating" method="post">
        <input type="text" name="criterion" placeholder="Bewertungskriterium" required>
        <input type="number" name="weight" placeholder="Gewichtung" required>
        <input type="number" name="rating" placeholder="Note" required>
        <input type="submit" value="Hinzufügen">
    </form>

    <!-- Tabelle zur Anzeige der Bewertungskriterien -->
    <table>
        <tr>
            <th>Kriterium</th>
            <th>Gewichtung</th>
            <th>Punkte</th>
            <th>Gewichtete Punkte</th>
            <th>Aktionen</th>
        </tr>
        {% for rating in thesis.ratings %}
            <tr>
                <td>{{ rating.criterion }}</td>
                <td>{{ rating.weight }}</td>
                <td>{{ rating.rating }}</td>
                <td>{{ rating.weight * rating.rating }}</td>
                <td>
                    <a href="/thesis/{{ thesis.id }}/rating/delete/{{ rating.id }}">Löschen</a>
                </td>
            </tr>
        {% endfor %}
        <!-- Fußzeile der Tabelle -->
        <tr class="table_footer">
            <td colspan="1"><strong>Summen</strong></td>
            <td>{{ total_weight }}</td>
            <td></td>
            <td>{{ total_rating }}</td>
            <td></td>
        </tr>
        <tr>
            <td colspan="5">Durchschnittsnote: {{ average_rating }}</td>
        </tr>
    </table>
{% endblock %}
